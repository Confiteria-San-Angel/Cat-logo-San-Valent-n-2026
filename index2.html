<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba - Confitería San Ángel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: sans-serif; background: #fff0f3; padding: 20px; color: #4a0e0e; }
        .producto { background: white; margin: 10px 0; padding: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ffb3c1; }
        .btn-add { background: #ff4d6d; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
        .carrito-fijo { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 20px; border-top: 3px solid #ff4d6d; text-align: center; }
        .btn-wa { background: #25d366; color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block; margin-top: 10px; }
    </style>
</head>
<body>

    <h1>Confitería San Ángel</h1>
    <p>Selecciona tus productos para San Valentín:</p>

    <div id="lista"></div>

    <div class="carrito-fijo">
        <strong>Total Pedido: $<span id="total">0</span></strong><br>
        <a href="#" class="btn-wa" onclick="enviar()">Enviar Pedido a WhatsApp</a>
    </div>

    <script>
        // LISTA REDUCIDA PARA PRUEBA
        const productos = [
            [span_0](start_span){ n: "Rollito Rojo", p: 80 },[span_0](end_span)
            [span_1](start_span){ n: "Corazón Tricolor", p: 80 },[span_1](end_span)
            [span_2](start_span){ n: "Osito 3D", p: 100 },[span_2](end_span)
            [span_3](start_span){ n: "Sandía Enchilada", p: 85 }[span_3](end_span)
        ];

        let total = 0;
        let resumen = "";

        function mostrar() {
            let html = "";
            productos.forEach((prod, index) => {
                html += `
                    <div class="producto">
                        <div>
                            <strong>${prod.n}</strong><br>
                            $${prod.p}.00 / kilo
                        </div>
                        <button class="btn-add" onclick="sumar('${prod.n}', ${prod.p})">Agregar 1kg</button>
                    </div>
                `;
            });
            document.getElementById('lista').innerHTML = html;
        }

        function sumar(nombre, precio) {
            total += precio;
            resumen += `- 1kg de ${nombre} ($${precio})\n`;
            document.getElementById('total').innerText = total;
        }

        function enviar() {
            if (total === 0) return alert("Agrega algo al carrito");
            const mensaje = encodeURIComponent(`Hola Alonso, mi pedido es:\n\n${resumen}\nTotal: $${total}`);
            [span_4](start_span)window.open(`https://wa.me/525544865766?text=${mensaje}`);[span_4](end_span)
        }

        mostrar();
    </script>
</body>
</html>
